### 9.2.1 ipconfig
<details><summary><font size="5"> 9.2.1 内容 </summary>

> - ipconfig是Windows系统最常见的网络管理工具，可以显示所有网卡的TCP/IP配置

- ipconfig的语法如下：
   - ipconfig [[/all]](#ipconfig_all) [[/renew [Adapter]]](#ipconfig_renew) [[/release [Adapter]]](#ipconfig_release) [[/flushdns]](#ipconfig_flushdns) [[/displaydns]](#ipconfig_displaydns) [[/registerdns]](#ipconfig_registerdns) [[/showclassid [Adapter]]](#ipconfig_showclassid) [[/setclassid Adapter [ClassID]]](#ipconfig_setclassid)
  
- 以上参数具体解读如下：

|参数|具体解释|
|---:|---:|
|/?|显示帮助信息|
|<span id="ipconfig_all"> /all </span>|显示所有网卡的完整 TCP/IP 配置信息|
|<span id="ipconfig_renew"> /renew [
*Adapter* </span>|更新指定网卡的 DHCP 配置|
|<span id="ipconfig_release"> /release *Adapter* </span>|释放指定网卡的 IPv4 地址，断开 DHCP 租约|
|<span id="ipconfig_flushdns"> /flushdns </span>|**刷新并清除客户端 DNS 缓存内容**|
|<span id="ipconfig_displaydns"> /displaydns </span>|显示当前 DNS 缓存中的内容|
|<span id="ipconfig_registerdns"> /registerdns </span>|刷新所有 DHCP 租约并重新注册 DNS 名字|
|<span id="ipconfig_showclassid"> /showclassid *Adapter* </span>|显示网卡的 DHCP 类别 ID|
|<span id="ipconfig_setclassid">/setclassid *Adapter* [*ClassID*] </span>|对指定的网卡(Adapter)设置DHCP类别ID|

- 具体实例：
```
Windows IP Configuration

   Host Name . . . . . . . . . . . . : network_Adapter
   Primary Dns Suffix  . . . . . . . : 
   Node Type . . . . . . . . . . . . : Unknown
   IP Routing Enabled. . . . . . . . : No
   WINS Proxy Enabled. . . . . . . . : No

Ethernet adapter 本地连接:

   Connection-specific DNS Suffix  . : 
   Description . . . . . . . . . . . : Intel(R) Ethernet Connection
   Physical Address. . . . . . . . . : 00-16-3C-07-C2-72
   DHCP Enabled. . . . . . . . . . . : Yes
   Autoconfiguration Enabled . . . . : Yes
   IPv4 Address. . . . . . . . . . . : a.b.c.3(Preferred) 
   Subnet Mask . . . . . . . . . . . : 255.255.255.0
   Default Gateway . . . . . . . . . : a.b.c.1
   DHCP Server . . . . . . . . . . . : a.b.c.1
   DNS Servers . . . . . . . . . . . : 8.8.8.8
                                       1.1.1.1
```

</details>

### 9.2.2 ping
<details><summary><font size="5"> 9.2.2 内容 </summary>

> [ping](https://en.wikipedia.org/w/index.php?title=Ping_(networking_utility)&wprov=rarw1)通过发送<abbr title="Type 8: Echo Request (回声请求)">ICMP回声请求</abbr>报文来检验与另外一个计算机的连接

- ping的语法如下：
   - ping [[-t]](#ping_t) [[-a]](#ping_a) [[-n Count]](#ping_n) [[-l Size]](#ping_l) [[-f]](#ping_f) [[-i TTL]](#ping_i) [[-v ToS]](#ping_v) [[-r Count]](#ping_r) [[-s Count]](#ping_s) [{[-j HostList](#ping_j) | [-k HostList](#ping_k)}] [[-w Timeout]](#ping_w) [[-TargetName]](#ping_TN)

- 命令参数解读如下：

|参数|具体解释|
|---:|---:|
|<span id="ping_t"> -t </span>|持续发送回声直到被中断|
|<span id="ping_a"> -a </span>|反向解析|
|<span id="ping_n"> -n *Count* </span>|指定发送回声次数|
|<span id="ping_l"> -l *Size* </span>|发送回声的字节数|
|<span id="ping_f"> -f </span>|force极限测试，测试最大报文长度|
|<span id="ping_i"> -i *TTL* </span>|指定IP头中TTL的值|
|<span id="ping_v"> -v *ToS* </span>|指定IP头中ToS的值|
|<span id="ping_r"> -r *Count* </span>|在IP头中添加路由记录|
|<span id="ping_s"> -s *Count* </span>|在IP头中添加时间戳|
|<span id="ping_j"> -j *HostList* </span>|在IP头中使用松散源路由选项，*HostList*表示中间节点|
|<span id="ping_k"> -k *HostList* </span>|在IP头中使用严格源路由选项，*HostList*表示中间节点|
|<span id="ping_w"> -w *Timeout* </span>|指定回声响应时间|
|<span id="ping_TN"> -TargetName </span>|用IP或主机名指定目标名称|

- 具体实例：
```
C:\Documents and Settings\Administrator>ping www.163.cn

pinging www.163.cn[219.137.167.157] with 32 bytes of data:

Reply from 219.137.167.157: byte=32 time=29ms TTL=54
Reply from 219.137.167.157: byte=32 time=29ms TTL=54
Reply from 219.137.167.157: byte=32 time=29ms TTL=54
Reply from 219.137.167.157: byte=32 time=29ms TTL=54

Ping statistics for 219.137.167.157:
    Packets: Sent = 4, Received = 4, Lost = 0<0% loss>,
Approximate round trip times in milli-seconds:
    Minimum = 29ms, Maximum = 29ms, Average = 29ms
```

</details>

### 9.2.3 ARP
<details><summary><font size="5"> 9.2.3 内容 </summary>

> arp命令用于显示和修改地址解析协议缓存表的内容。若使用不带参数的arp命令，则显示帮助信息
- arp语法如下：
   - arp [[-a](#arp_a) [*InetAddr*] [-N *IfaceAddr*]] [[-g](#arp_g) [*InetAddr*] [-N *IfaceAddr* ]] [[-d](#arp_d) [*InetAddr*] [*IfaceAddr*]]  [[-s](#arp_s) *InetAddr EtherAddr* [*IfaceAddr*]] 
   
命令参数解读如下：
| 命令 | 具体参数 |
|---:|---:|
|<span id="arp_a">[-a] [*InetAddr*] [-N *IfaceAddr*]</span>|显示所有接口的ARP缓存表
|<span id="arp_g">[-g] [*InetAddr*] [-N *IfaceAddr*]</span>|与[-a](#arp_a)相同
|<span id="arp_d">[-d] [*InetAddr*] [*IfaceAddr*]</span>|删除由InetAddr指示的ARP缓存表项|
|<span id="arp_s">[-s] *InetAddr EtherAddr* [*IfaceAddr*]</span>|添加一个静态的ARP表项|

实例如下：
```cmd
C:\> arp -a

Interface: 100.100.17.17 --- 0x10003
  Internet Address      Physical Address      Type
  100.100.17.254        00-0f-e2-29-31-c1     dynamic
C:\> arp -s 10.0.0.80 00-AA-00-4F-2A-9C
C:\> arp -a

Interface: 100.100.17.17 --- 0x10003
  Internet Address      Physical Address      Type
  100.100.17.254        00-0f-e2-29-31-c1     dynamic
  10.0.0.80             00-aa-00-4f-2a-9c     static
```
</details>

### 9.2.4 netstat
<details><summary><font size="5"> 9.2.4 内容 </summary>

> netstat命令用于显示TCP连接、计算机正在监听的端口、以太网统计信息、IP路由表、IPv4统计信息、IPv6统计信息等

- netstat命令语法如下：
   - netstat [[-a]](#netstat_a) [[-e]](#netstat_e) [[-n]](#netstat_n) [[-o]](#netstat_o) [[-p *Protocol*]](#netstat_p) [[-r]](#netstat_r) [[-s]](#netstat_s) [[Interval]](#netstat_Interval)

命令参数解读如下：
| 命令 | 具体参数 |
|---:|---:|
|<span id="netstat_a"> -a </span>|显示所有活动的TCP连接|
|<span id="netstat_e"> -e </span>|显示以太网统计信息|
|<span id="netstat_n"> -n </span>|用数字显示所有活动的TCP连接地址和端口号|
|<span id="netstat_o"> -o </span>|显示活动的TCP连接和每个连接对应的进程ID|
|<span id="netstat_p"> -p *Protocol* </span>|用标识符*Protocol*指定要显示的协议|
|<span id="netstat_s"> -s </span>|显示每个协议的统计数据|
|<span id="netstat_r"> -r </span>|显示IP路由表的内容|
|<span id="netstat_Interval"> *Interval* </span>|说明重新显示信息的时间间隔|
|Proto|表示协议名字(TCP|UDP)|
|Local Address|本地计算机地址与端口|
|Foreign Address|远程计算机地址与接口|

State：表示TCP连接状态，用以下状态：
|参数|状态|
|---:|---:|
|CLOSE_WAIT|收到对方的连接释放请求|
|CLOSED|连接已关闭|
|ESTABLISHED|连接已建立|
|FIN_WAIT_1|已发出连接释放请求|
|FIN_WAIT_2|等待对方的连接释放请求|
|LAST_ACK|等待对方的连接释放应答|
|LISTENING|正在监听端口|
|SYN_RECEIVED|收到对方的连接建立请求|
|SYN_SEND|已主动发出连接建立请求|
|TIMED_WAIT|等待一段时间后将释放连接|

实例如下：
```
C:\> netstat -an
  Active Connections
  Proto  Local Address          Foreign Address        State
  TCP    0.0.0.0:135            0.0.0.0:0              LISTENING
  TCP    192.168.1.100:443      1.1.1.1:52443          ESTABLISHED
  UDP    0.0.0.0:5353           *:*
```
</details>

### 9.2.5 tracert
<details><summary><font size="5"> 9.2.5 内容 </summary>

> tracert（跟踪路由）命令使用IP生存空间(TTL)字段和ICMP错误信息来确定从一个主机到网络上其他主机的路由
- tracert命令的语法如下：
    - tracert [[-d]](#tracert_d) [[-h *MaximumHups*]](#tracert_h) [[-j *HostList*]](#tracert_j) [[-w *Timeout*]](#tracert_w) [[TargetName]](#tracert_TN)

- 命令参数解读如下：

|命令|具体参数|
|---:|---:|
|<span id="tracert_d"> -d </span>|不进行名字解析，显示中间节点IP地址，**可以增加跟踪速度**|
|<span id="tracert_h"> -h *MaximumHops*</span>|说明地址搜索最大跃点数，默认30跳|
|<span id="tracert_j"> -j *HostList* </span>|说明发送<abbr title="Type 8: Echo Request (回声请求)">ICMP type 8</abbr>要使用IP头的松散源路由选项|
|<span id="tracert_w"> -w *Timeout* </span>|说明了等待<abbr title="Type 0: Echo Reply (回声响应)">ICMP type 0</abbr>的时间|
|<span id="tracert_TN"> *TargetName* </span>|用IP或主机名表示的目标|

- 具体实例：
```
C:\> tracert -d 8.8.8.8

Tracing route to 8.8.8.8 over a maximum of 30 hops:

  1     1 ms     1 ms     1 ms  192.168.1.1
  2     5 ms     4 ms     4 ms  10.21.0.1
  3    12 ms    13 ms    12 ms  202.97.57.105
  4    15 ms    14 ms    14 ms  59.43.80.66
  5   158 ms   156 ms   155 ms  202.97.50.22
  6   162 ms   160 ms   161 ms  108.170.247.129
  7   165 ms   164 ms   164 ms  142.250.226.119
  8   160 ms   160 ms   160 ms  8.8.8.8

Trace complete.
```
</details>

### 9.2.6 pathping
<details><summary><font size="5"> 9.2.6 内容 </summary>
   
> pathping结合了ping和tracert两个命令的功能，可以显示通信线路上每个子网的延迟和丢包率
- pathping语法如下：
   - pathping [[-n]](#pathping_n) [[-h *MaximumHops*]](#pathping_h) [[-g *HostList*]](#pathping_g) [[-p *Period*]](#pathping_p) [[-q *NumQueries*]](#pathping_q) [[-w *Timeout*]](#pathping_w) [[-T]](#pathping_T) [[-R]](#pathping_R) [[TargetName]](#pathping_TN)
   
以上参数解读如下：

| 命令 | 具体参数 |
|---:|---:|
|<span id="pathping_n">[-n] </span>|不进行名字解析，加快速度|
|<span id="pathping_h">[-h *MaximumHops*] </span>|说明搜索目标期间最大跃点数|
|<span id="pathping_g">[-g *HostList*] </span>|> | 在 <abbr title="Type 8: Echo Request (回声请求)">ICMP type 8</abbr> 时使用松散源路由 |
|<span id="pathping_p">[-p *Period*] </span>|说明两次ping之间的时间间隔|
|<span id="pathping_q">[-q *NumQueries*] </span>|说明发送给每个路由器的<abbr title="Type 8: Echo Request (回声请求)">ICMP type 8</abbr>的数量
|<span id="pathping_w">[-w *Timeout*] </span>|说明每次等待<abbr title="Type 0: Echo Reply (回声响应)">ICMP type 0</abbr>的时间
|<span id="pathping_T">[-T] </span>|对发送的<abbr title="Type 8: Echo Request (回声请求)">ICMP type 8</abbr>数据包附加上第二层优先标志（例如[802.1p](https://zh.wikipedia.org/zh-tw/IEEE_802.1p)）
|<span id="pathping_R">[-R] </span>|确定通路上的设备是否支持[资源预约协议](https://baike.baidu.com/item/%E8%B5%84%E6%BA%90%E9%A2%84%E7%95%99%E5%8D%8F%E8%AE%AE/2991465)
|<span id="pathping_TN">[TargetName] </span>|有IP或主机名表示的目标

实例如下：
```
Tracing route to corp1 [10.54.1.196]
over a maximum of 30 hops:
  0  172.16.87.35 
  1  172.16.87.218 
  2  192.168.52.1 
  3  192.168.80.1 
  4  10.54.247.14 
  5  10.54.1.196 

Computing statistics for 125 seconds...
            Source to Here   This Node/Link
Hop  RTT    Lost/Sent = Pct  Lost/Sent = Pct  Address
  0                                           172.16.87.35 
                                0/ 100 =  0%   |
  1   41ms     0/ 100 =  0%     0/ 100 =  0%  172.16.87.218 
                               13/ 100 = 13%   |
  2   22ms    16/ 100 = 16%     3/ 100 =  3%  192.168.52.1 
                                0/ 100 =  0%   |
  3   24ms    13/ 100 = 13%     0/ 100 =  0%  192.168.80.1 
                                0/ 100 =  0%   |
  4   21ms    13/ 100 = 14%     1/ 100 =  1%  10.54.247.14 
                                0/ 100 =  0%   |
  5   24ms    13/ 100 = 13%     0/ 100 =  0%  10.54.1.196 

Trace complete.
```

</details>

### 9.2.7 route
<details><summary><font size="5"> 9.2.7 内容 </summary>

> route是显示和修改本地IP路由表的重要命令，如果不带参数则显示帮助信息
- route语法如下：
   - route [[-f]](#route_f) [[-p]](#route_p) [[*Command* [*Destination*] [mask *Netmask*] [Gateway] [metric *Metric*] ]](#route_c) [[if *Interface*]](#route_if)
   
以上参数解读如下：

| 命令 | 具体参数 |
|---:|---:|
|<span id="route_f">[-f] </span>|删除路由表中的网络路由、本地环路路由和组播路由|
|<span id="route_p">[-p] </span>|与add命令联用时，一条路由被添加到注册表中，当TCP/IP协议启用时，用于初始化路由表|
|<span id="route_c"> [*Command* [*Destination*] [mask *Netmask*] [Gateway] [metric *Metric*] ]</span>|表示要运行的[命令](#route_command)|
|<span id="route_if"> [if *Interface*] </span>|说明接口的索引|

以下是<span id="route_command"> *Command命令* </span>的具体参数解读：
|命令|具体参数|
|---:|---:|
|*Destination*|说明目标地址，可以是网络地址、主机地址或默认路由|
|*mask Netmask*|说明了目标地址的子网掩码|
|*Gateway*|说明了下一跃点的IP地址|
|metric *Metric*|说明了路由度量值|

  <details><summary><font size="6"> route实例 </summary>
     

- 1.**显示路由表完整内容**
     - route print
- 2.**显示路由表中以 10. 开头的项**
     - route print 10.*
- 3.**添加默认路由，网关为 192.168.12.1**
     - route add 0.0.0.0 mask 0.0.0.0 192.168.12.1
- 4.**添加目标 10.41.0.0，掩码 255.255.0.0，网关 10.27.0.1**
     - route add 10.41.0.0 mask 255.255.0.0 10.27.0.1
- 5.**添加上述路由为永久路由（重启不失效）**
     - route -p add 10.41.0.0 mask 255.255.0.0 10.27.0.1
- 6.**添加路由并指定度量值（Metric）为 7**
     - route add 10.41.0.0 mask 255.255.0.0 10.27.0.1 metric 7
- 7.**添加路由并指定接口索引为 0x3**
     - route add 10.41.0.0 mask 255.255.0.0 10.27.0.1 if 0x3
- 8.**删除目标为 10.41.0.0，掩码为 255.255.0.0 的路由**
     - route delete 10.41.0.0 mask 255.255.0.0
- 9.**删除路由表中所有以 10. 开头的路由**
     - route delete 10.*
- 10.**修改现有路由的网关地址**
     - route change 10.41.0.0 mask 255.255.0.0 10.27.0.25


  </details>
</details>

### 9.2.8 netsh
<details><summary><font size="5"> 9.2.8 内容 </summary>

> netsh是Windows命令行脚本实用程序，允许本地或远程显示及修改当前计算机的网络配置。如果不带参数，netsh将进入交互式shell环境。*需要管理员权限*

- netsh语法如下：
   - netsh [[ -a AliasFile ]](#netsh_a) [[ -c Context ]](#netsh_c) [[ -r RemoteComputer ]](#netsh_r) [[ -u Domain\User ]](#netsh_u) [[ -p Password ]](#netsh_p) [[[ Command ]](#netsh_com)|[[ -f ScriptFile ]](#netsh_f)]
   
以上参数解读如下：

| 命令 | 具体参数 |
|---:|---:|
|<span id="netsh_a">-a *AliasFile* </span>|指定一个别名文件，其中包含 netsh 命令列表|
|<span id="netsh_c">c *Context*</span>|切换到指定的 netsh [上下文](#netsh_word)|
|<span id="netsh_r">-r *RemoteComputer*</span>|配置远程计算机，需开启远程管理服务|
|<span id="netsh_u">-u *Domain*/*User*</span>|说明接口的索引|
|<span id="netsh_p">-p *Password* </span>|指定上述用户的密码|
|<span id="netsh_com">Command</span>|要执行的 netsh 命令|
|<span id="netsh_f"> -f *ScriptFile* </span>|执行指定的脚本文件中的所有 netsh 命令|

常用<span id="netsh_word">上下文</span>与子命令
| 上下文 | 常用命令 | 说明 |
|:---|:---|:---|
| **`interface ip`** | `show config`<br>`set address`<br>`set dns`<br>`show route` | 显示/配置 TCP/IP 参数<br>查看接口 IP 配置<br>设置静态 IP 地址<br>设置 DNS 服务器<br>显示 IP 路由表 |
| **`wlan`** | `show networks`<br>`show profiles`<br>`connect name=`<br>`show profile name= key=clear` | 管理无线网络<br>扫描可用的 Wi-Fi<br>列出已保存的 Wi-Fi<br>连接到指定 Wi-Fi<br>查看 Wi-Fi 密码 |
| **`advfirewall`** | `show allprofiles`<br>`set allprofiles state on/off`<br>`firewall add rule` | 配置高级防火墙<br>查看所有配置文件状态<br>启用/禁用防火墙<br>添加防火墙规则 |
| **`interface portproxy`** | `show all`<br>`add v4tov4`<br>`delete v4tov4` | 配置端口转发<br>查看所有转发规则<br>添加 IPv4 到 IPv4 转发<br>删除转发规则 |
| **`trace`** | `start scenario=InternetClient`<br>`stop` | 网络跟踪诊断<br>开始捕获网络跟踪<br>停止跟踪并生成报告 |

实例如下（netsh interface ip show config）：
```
Configuration for interface "Ethernet" (Intel(R) Ethernet Connection (7) I219-V)
    DHCP enabled:                        No
    IP Address:                           192.168.1.100
    Subnet Prefix:                        192.168.1.0/24 (mask 255.255.255.0)
    Default Gateway:                      192.168.1.1
    Gateway Metric:                        0
    InterfaceMetric:                       25
    DNS servers configured:                8.8.8.8 (no)
                                            114.114.114.114 (no)
    Register with which suffix:            Primary DNS suffix
    WINS servers configured:               None
```
</details>

### 9.2.9 nslookup
<details><summary><font size="6"> 9.2.9 内容</summary>
> nslookup命令用于显示DNS查询信息，诊断和排除DNS故障
<details><summary><font size="6"> 非交互式工作（单次查询）</summary>
   
- nslookup非交互式语法如下：
   - nslookup [[-type]](#nslookup_type) [[-debug]](#nslookup_debug) [[-port]](#nslookup_port) [[-timeout]](#nslookup_timeout) [<host>](#nslookup_host) [<-server>](#nslookup_server)

以上命令参数如下：

| 参数 | 具体参数 |
|---:|---|
|<span id="nslookup_type">-type</span>|指定要查询的 DNS 记录类型，常用类型：A（默认）、MX、NS、CNAME、PTR、TXT、AAAA|
|<span id="nslookup_debug">-debug</span>|调试模式，显示详细的查询过程|
|<span id="nslookup_port">-port</span>|指定 DNS 服务器的端口，默认 53|
|<span id="nslookup_timeout">-timeout</span>|指定等待响应的超时时间，默认为 5 秒|
|<span id="nslookup_host">要查询的域名</span>|正向解析时输入域名，反向解析时直接输入 IP 地址|
|<span id="nslookup_server">DNS服务器</span>|指定用于查询的 DNS 服务器（IP 地址），不指定则使用系统默认 DNS|

实例：
```
C:\>nslookup nsl.isi.edu
 Server: nsl.damain.com
 Address: 202.30.19.1

 Non-authoritative answer:
 Name: nsl.isi.edu
 Address: 128.9.0.107
```
</details>
<details><summary><font size="6"> 交互式工作（多次查询）</summary>

> 在 [命令提示符](https://zh.wikipedia.org/zh-tw/%E5%91%BD%E4%BB%A4%E6%8F%90%E7%A4%BA%E5%AD%97%E5%85%83)下输入 `nslookup` 并回车，提示符变为 `>`

具体命令如下：

| 命令 | 具体解释 |
|---:|---|
|<span id="nslookup_settype">set type=记录类型</span>|设置要查询的记录类型，例如 `set type=MX`|
|<span id="nslookup_servercmd">server DNS服务器</span>|将默认服务器切换到指定的 DNS 服务器|
|<span id="nslookup_lserver">lserver DNS服务器</span>|使用初始服务器切换到指定的 DNS 服务器（不改变默认服务器）|
|<span id="nslookup_setdebug">set debug</span>|开启调试模式（同命令行 `-debug`）|
|<span id="nslookup_setnodebug">set nodebug</span>|关闭调试模式|
|<span id="nslookup_setrecurse">set recurse</span>|设置递归查询（默认）|
|<span id="nslookup_setnorecurse">set norecurse</span>|设置非递归查询|
|<span id="nslookup_exit">exit</span>|退出交互模式|
</details>
