### 5.6.1 路由协议的分类
> [自治系统](https://zh.wikipedia.org/wiki/%E8%87%AA%E6%B2%BB%E7%B3%BB%E7%BB%9F)是由同构型的网关连接的因特网，这样的系统往往就是由一个网络管理中心控制的。
> 根据路由协议运行在内部或外部，可分为两种：
> - 运行于自治系统内部的[内部网关协议](https://zh.wikipedia.org/wiki/%E5%86%85%E9%83%A8%E7%BD%91%E5%85%B3%E5%8D%8F%E8%AE%AE)
> - 运行于自治系统外部的[外部网关协议](https://zh.wikipedia.org/wiki/%E5%A4%96%E9%83%A8%E7%BD%91%E5%85%B3%E5%8D%8F%E8%AE%AE)

### 5.6.2 内部网关协议（IGP）
<details><summary><font size="5"> 路由信息协议 </summary>

> RIP的原型最早出现在 UNIX Berkley 4.3 BSD中，他采用Bellman-Ford的距离矢量路由算法，用于在ARPANET中计算最佳路由
> 适用于小型网络，因为它允许步数不超过15步

  <details><summary><font size="7"> 1）RIPv1 </summary>

**特点**：
> - **度量标准**：仅以跳数作为路径选择依据，最大有效跳数为15，16跳表示不可达
> - **更新方式**：定期（30秒）广播整个路由表到所有激活的接口（使用广播地址255.255.255.255），不关心邻居是否存在
> - **路由度量**：默认等价路径支持6条，但无法根据带宽、延迟等动态选路

**局限性**：
> - **不支持VLSM/CIDR**：由于路由更新中不携带子网掩码，无法支持可变长子网掩码和无类域间路由，必须使用主类网络（A、B、C类）
> - **收敛慢**：依赖计时器（更新30s、无效180s、刷新240s）来检测网络变化，容易产生路由环路
> - **无安全性**：不提供任何认证机制，易受恶意路由欺骗
  </details>

  <details><summary><font size="7"> 2）RIPv2 </summary>

**特点**
> - **度量标准**：依然以**跳数**为准，最大15跳，16跳不可达（与v1一致）
> - **更新方式**：使用[组播](https://zh.wikipedia.org/wiki/%E5%A4%9A%E6%92%AD)发送更新，而非广播，减少了对无关主机的干扰
> - **关键升级点**：路由更新中携带子网掩码，因此支持[VLSM](https://github.com/navi0231/network-engineer-note/blob/main/5-Internet-connection/5.2-IP-protocol.md#522--ipv4%E5%9C%B0%E5%9D%80)和[CIDR](https://zh.wikipedia.org/wiki/%E6%97%A0%E7%B1%BB%E5%88%AB%E5%9F%9F%E9%97%B4%E8%B7%AF%E7%94%B1)

**核心内容**：
> - **支持认证**：提供了**明文认证**和[**MD5认证**](https://zh.wikipedia.org/wiki/MD5)两种机制，增强了协议安全性，防止恶意路由注入。
> - **路由标记**：支持**路由标记（Tag）** 功能，可在路由策略中实现灵活控制（如区分内部路由和重分发进来的外部路由）。
> - **下一跳指示**：可以在更新中明确指定下一跳IP地址，在某些非广播多路访问网络中可优化路由路径。
  </details>
